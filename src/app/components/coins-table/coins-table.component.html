<section>
    <h1 class="center-text mat-display-1">{{'home.title' | translate}}</h1>
</section>


<mat-table [dataSource]="dataSourceEmpty" matSort *ngIf="dataSource.data.length == 0">
    <ng-container matColumnDef="market_cap_rank">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.rank' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"><span></span></mat-cell>
    </ng-container>

    <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.name' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"> <span></span> </mat-cell>
    </ng-container>

    <ng-container matColumnDef="market_cap">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.market_cap' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"><span></span></mat-cell>
    </ng-container>

    <ng-container matColumnDef="current_price">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.price' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"><span></span></mat-cell>
    </ng-container>

    <ng-container matColumnDef="total_volume">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.volume' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"><span></span></mat-cell>
    </ng-container>

    <ng-container matColumnDef="circulating_supply">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.circulating_supply' | translate}}
        </mat-header-cell>
        <mat-cell *matCellDef="let element"><span></span></mat-cell>
    </ng-container>

    <ng-container matColumnDef="price_change_percentage_24h">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.change_24h' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"><span></span></mat-cell>
    </ng-container>

    <ng-container matColumnDef="sparkline7d">
        <mat-header-cell *matHeaderCellDef> {{'home.table.graph_7d' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"><span></span></mat-cell>
    </ng-container>
    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;">
    </mat-row>
</mat-table>


<mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" *ngIf="dataSource.data.length > 0">
    <ng-container matColumnDef="market_cap_rank">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.rank' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.market_cap_rank}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.name' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element" class="clickable" [routerLink]="['/coins',element.id]"> <img
                [src]="element.image" class="coin-logo" [alt]="element.name">
            {{element.name}}
        </mat-cell>
    </ng-container>

    <ng-container matColumnDef="market_cap">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.market_cap' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.market_cap | currency}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="current_price">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.price' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.current_price | currency}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="total_volume">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.volume' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.total_volume | currency}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="circulating_supply">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.circulating_supply' | translate}}
        </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.circulating_supply  | number:'1.0-0'}}
            {{element.symbol | uppercase}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="price_change_percentage_24h">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{'home.table.change_24h' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element"
            [ngStyle]="{'color': element.price_change_percentage_24h > 0 ? 'green' : 'red'}">
            {{element.price_change_percentage_24h | number:'1.2-2'}}%</mat-cell>
    </ng-container>

    <ng-container matColumnDef="sparkline7d">
        <mat-header-cell *matHeaderCellDef> {{'home.table.graph_7d' | translate}} </mat-header-cell>
        <mat-cell *matCellDef="let element">
            <ngx-trend [data]="element.sparkline_in_7d.price" [autoDraw]="true" [autoDrawDuration]="2000"
                autoDrawEasing="ease-in" [smooth]="true" radius="25" strokeWidth="1.5" stroke="#a68b23"
                strokeLinecap="round"></ngx-trend>
        </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
</mat-table>